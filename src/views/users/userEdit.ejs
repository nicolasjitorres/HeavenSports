<%- include ('../partials/head')%>

<link rel="stylesheet" href="/css/userEdit.css">
<title>Editar</title>

</head>

<body>

  <!-- ENCABEZADO -->
  <%- include ('../partials/header')%>

  <!-- PRINCIPAL -->
  <main>


    <!-- Formulario edicion -->
    <div class="contenedor-form">
      <h4 class="titulo">Edici√≥n del perfil</h4>

      <form action="/users/edit?_method=PUT" method="POST" enctype="multipart/form-data">

        <!-- NOMBRE -->
        <div class="box">
          <input type="text" name="nombre" id="nombre" value="<%= usuario.nombre %>">
          <label for="nombre">Nombre</label>
        </div>
        <% if (locals.errors) { %>
        <% const nombreError = errors.find(error => error.path == 'nombre'); %>
        <% if (nombreError) { %>
        <h6 style="color: red;"><%= nombreError.msg %></h6>
        <% } %>
        <% } %>

        <!-- APELLIDO -->
        <div class="box">
          <input type="text" name="apellido" id="apellido" value="<%= usuario.apellido %>">
          <label for="apellido">Apellido</label>
        </div>
        <% if (locals.errors) { %>
        <% const apellidoError = errors.find(error => error.path == 'apellido'); %>
        <% if (apellidoError) { %>
        <h6 style="color: red;"><%= apellidoError.msg %></h6>
        <% } %>
        <% } %>
        
        <!-- TELEFONO -->
        <div class="box">
          <input type="text" name="telefono" id="telefono" value="<%= usuario.telefono %>">
          <label for="telefono">Telefono</label>
        </div>

        <!-- EMAIL -->
        <div class="box">
          <input style="display: none;" type="email" name="emailAnt" value="<%= usuario.emailAnt || usuario.email %>">
          <input type="email" name="email" id="email" value="<%= usuario.email %>">
          <label for="email">Email</label>
        </div>
        <% if (locals.errors) { %>
        <% const emailError = errors.find(error => error.path == 'email'); %>
        <% if (emailError) { %>
        <h6 style="color: red;"><%= emailError.msg %></h6>
        <% } %>
        <% } %>

        <!-- IMAGEN ANTERIOR USUARIO -->
        <div class="box-img-ant">
          <label class="box-check-titulo">Imagen de perfil actual</label>
          <input style="display: none;" type="text" value="<%= usuario.imagen ? usuario.imagen.nombre : usuario.imgAnt %>" name="imgAnt">
          <img src="/images/users/<%= usuario.imagen ? usuario.imagen.nombre : usuario.imgAnt %>" alt="img-anterior">
        </div>


        <!-- CARGAR IMAGEN USUARIO -->
        <div class="box-img">
          <label for="img" class="label-img">Cargar nueva foto de perfil</label>
          <input class="input-image" type="file" id="img" name="imagen" accept=".jpg, .png, .jpeg">
        </div>


        <div class="botones">
          <!-- Boton carga -->
          <button type="submit" class="boton">Guardar</button>
        </div>

        <a href="/users/profile">Cancelar</a>

      </form>

    </div>
  </main>
  <!-- PIE DE PAGINA -->
  <%- include ('../partials/footer')%>


</body>

</html>